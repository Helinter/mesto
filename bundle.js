(()=>{"use strict";class e{constructor(e,t,n){this._cardElement=t.querySelector(".element").cloneNode(!0),this._name=e.name,this._link=e.link,this._titleImage=this._cardElement.querySelector(".element__image"),this._deleteButton=this._cardElement.querySelector(".element__delete-button"),this._likeButton=this._cardElement.querySelector(".element__like-button"),this._listItem=this._deleteButton.closest(".element"),this._handleCardClick=n,this._imageData={link:this._link,name:this._name}}createCard(){return this._htmlSetings(),this._seteventlisteners(),this._cardElement}_htmlSetings(){this._cardElement.querySelector(".element__title").textContent=this._name,this._titleImage.setAttribute("src",this._link),this._titleImage.setAttribute("alt",this._name)}_seteventlisteners(){this._likeButton.addEventListener("click",(()=>this._likeOn())),this._deleteButton.addEventListener("click",(()=>this._deleteOn())),this._titleImage.addEventListener("click",(()=>this._popupImgOn()))}_popupImgOn(){this._handleCardClick(this._imageData)}_deleteOn(){this._listItem.remove(),this._listItem=null}_likeOn(){this._likeButton.classList.toggle("element__like-button_active")}}class t{constructor(e,t){this._submitButton=document.getElementById("cardSubmit"),this._config=e,this._formElement=t,this._inputsList=this._formElement.querySelectorAll(this._config.inputSelector),this._submitButtonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector))}enableValidation(){this._setEventListeners()}_setEventListeners(){[...this._inputsList].forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_toggleButtonState(){this._formElement.checkValidity()?(this._submitButtonElement.disabled=!1,this._submitButtonElement.classList.remove(this._config.inactiveButtonClass)):(this._submitButtonElement.disabled=!0,this._submitButtonElement.classList.add(this._config.inactiveButtonClass))}_checkInputValidity(e){this._errorElement=this._formElement.querySelector(`#${e.name}-error`);const t=e.validity.valid;this._errorElement&&(t?this._hideError(e):this._showError(e))}_showError(e){e.classList.add(this._config.inputErrorClass),this._errorElement.textContent=e.validationMessage}_hideError(e){e.classList.remove(this._config.inputErrorClass),this._errorElement.textContent=e.validationMessage}_buttonDisabled(){this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.disabled=!0}}const n={formSelector:".form",inputSelector:".popup__input",submitButtonSelector:".popup__container-button",inactiveButtonClass:"popup__container-button_invalid",inputErrorClass:"popup__input_invalid",errorClass:"error"};class s{constructor(e){this._popupSelector=e,this._popupElement=document.querySelector(e),this._closePopup=this._popupElement.querySelector(".popup__container-close-button"),this._popupContainer=this._popupElement.querySelector(".popup__container"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClose(){this._popupElement.addEventListener("click",(e=>{e.target===this._popupElement&&this.close()}))}setEventListeners(){this._closePopup.addEventListener("click",this.close.bind(this)),this._handleOverlayClose()}}class i extends s{constructor(e,t){super(e),this.formElement=this._popupElement.querySelector(".form"),this.handleFormSubmit=t,this._formSubmitButton=this._popupElement.querySelector(".popup__container-button"),this._inputElements=this.formElement.querySelectorAll("input")}close(){super.close(),this.formElement.reset()}_getInputValues(){const e={};return this._inputElements.forEach((t=>{const n=t.name,s=t.value;e[n]=s})),e}setEventListeners(){super.setEventListeners(),this.formElement.addEventListener("submit",(e=>{e.preventDefault(),this.handleFormSubmit(this._getInputValues())}))}}const o=document.querySelector(".card").content,r=document.querySelector(".popup__input_type_name"),l=document.querySelector(".popup__input_type_job"),c=(document.querySelector(".profile__info-title"),document.querySelector(".profile__info-subtitle"),document.querySelector(".profile__info-edit-button")),p=document.forms.profileForm,a=document.querySelector(".profile__add-button"),u=document.forms.placeForm,_=new i(".popup_type_edit-profile",(e=>{d.setUserInfo({name:e.formName,info:e.formJob}),_.close()}));_.setEventListeners();const m=new i(".popup_type_card",(e=>{var t;t={name:e.formPlace,link:e.formLink},v.addItem(f(t),!0),m.close()}));m.setEventListeners();const h=new class extends s{constructor(e){super(e),this._popupImg=this._popupElement.querySelector(".popup__img"),this._popupTitle=this._popupElement.querySelector(".popup__image-container-title")}open(e){super.open(),this._popupTitle.textContent=e.name,this._popupImg.src=e.link,this._popupImg.alt=e.name}}(".popup_type_image");h.setEventListeners();const d=new class{constructor({nameSelector:e,infoSelector:t}){this._nameElement=document.querySelector(e),this._infoElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,info:this._infoElement.textContent}}setUserInfo({name:e,info:t}){this._nameElement.textContent=e,this._infoElement.textContent=t}}({nameSelector:".profile__info-title",infoSelector:".profile__info-subtitle"});function E(e){h.open(e)}function f(t){return new e(t,o,E).createCard()}y(p),y(u),d.getUserInfo();const v=new class{constructor({items:e,renderer:t},n){this._renderer=t,this._container=document.querySelector(n),this._items=e.reverse()}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e,t=!1){t?this._container.prepend(e):this._container.append(e)}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){v.addItem(f(e),!0)}},".elements");function y(e){const s=new t(n,e);s.enableValidation(),e.addEventListener("submit",(()=>{s._buttonDisabled()}))}v.renderItems(),c.addEventListener("click",(function(){const e=d.getUserInfo().name,t=d.getUserInfo().info;r.value=e,l.value=t,_.open()})),a.addEventListener("click",(function(){m.open()}))})();